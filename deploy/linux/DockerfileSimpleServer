# 가벼운 Python 이미지
FROM python:3.12-slim

# 로그가 즉시 출력되도록
ENV PYTHONUNBUFFERED=1

# 작업 디렉토리
WORKDIR /app

# 소스 복사
COPY . /app

# 필요한 패키지 설치 (requirements.txt가 없다면 직접 설치)
RUN pip install --no-cache-dir fastapi uvicorn[standard]

# 포트
EXPOSE 8000

# 비루트 유저 (선택)
RUN adduser --disabled-password --gecos "" appuser && chown -R appuser /app
USER appuser

# main() 실행 -> uvicorn.run("simpleServer:app", ...)
CMD ["python", "App/simpleServer.py"]
